路由一般分为两种：
	静态路由
	动态路由
	静态路由适合规模较小的情况
Internet由多个独自管理的网络组成，这些网络称为自治系统,每个自治系统有自己的内部协议称为 内部网关协议IGP 或 域内选路协议。最常用的IGP为RIP
。
一个节点从引导到获取路由的全过程：
	1.开机引导，查看激活了哪些接口，检测静态还是动态。如果动态发送请求报文，支持广播的话就用广播形式发送(端口520 其他路由守护进程端口)
	2.根据请求的内容形式决定发送单个路由表项还是整个
	3.接收请求并对收到的内容到做出响应
	4.定期选路更新
	5.触发更新，度量改变就会触发更新那一条的路由
网络层在OSI中为第三层，因此路由器被称为第3层设备（目前有更高协议栈的路由器）
当路由器将数据从一个网络传输到另一个网络，会替换网络访问层报头信息。 
路由转发规则：
	1.搜索路由表，匹配是否有匹配网络地址
	2.搜索路由表，匹配是否有匹配网络号
	3.搜索路由表，按照默认规则转发
如果上述步骤都没有成功，并且数据报由本机发出。那么会向产生该数据报的应用返回"主机不可达"
三种路由：
	外部路由：在自治网络之间交换路由信息，维护自己及邻居自治网络的路由信息。边界路由网关协议（BGP）为EGP(已过时，但新的也称为EGP)
	内部路由：自治网络内部共享路由信息的路由器被称为内部网关，被称为内部网关协议(IGP)的一组协议，包括路由信息协议RIP,OSPF
	核心路由：已经不存在，但是自治系统会有自己的核心路由。用以细分和隔流。使用的协议有 网关到网关协议(GGP)，以及新出现的SPREAD协议
直接路由：路由器能够看到所有子网端口和IP地址，能够直接进行传输数据包
间接路由：路由器在没有帮助的情况下不能发现数据包要到达的网段，大多数网络都依赖与间接路由。
设定间接路由方式有两种：  1.手动为路由表添加网络路由（静态路由）；2.路由器之间可以相互沟通（动态路由）。
动态路由协议：RIP（距离矢量路由协议）和OSPF（开放式路由协议）

	RIP：高效、简单的路由方法。让路由器之间减少通信量，让路由表必须保留的数据最少。路由器不必知道完整的网段路径。
		只需要知道朝那个方向发送数据报即可。按照跳数比较路径效率，度量最小的保留，其它忽略。最大跳数15。度量就是跳数+1
		（RIP分为主动参与和被动参与；主动参与能够发送路由表给其他路由器，并且收听更新信息）。
		被动参与者只收听更新信息，不传播自己路由表（例如，普通计算机）。如果出现两条路径跳数一样的情况，会使用路由表现有路径。可以设置最大跳数限制。
	RIP报文结构如下：
		IP首部-UDP首部-RIP报文
		  20    8
		RIP—v1 报文：
			第一层：第一层为RIP的首部，4 字节
				命令(1-6) 8 bit  1表示请求，要求其它系统发送其全部或部分路由表  2表示应答，发送全部或部分 
						 3/4舍弃不用  5轮询 6 轮询表项
				版本(1)   8 bit  
				必须为0  16 bit
			第二层：			从此层开始到第六层为一个路由结构，20字节。
							最多再有24个路由，格式与其相同第六层以后开始循环。一共25个路由，25 *20 =500 +4 =504
							小于UDP的512字节，因此传输整个路由表时经常需要多个报文。
				地址系列(2) 16 bit
				必须为0	 16 bit
			第三层：
				32 bit IP地址            地址位都为0  度量16的 请求包是请求完整路由表。
			第四层/五层：
				都为0 32 bit
			第六层：
				度量(1-16) 32 bit	RIP的度量是 路由的  跳 。跳数为1 度量为2 因为一跳就表明两个网络。
	OSPF：链路状态线路。RIP模式情况下，只考虑到跳数问题，没考虑链路速率。在大规模网络环境中使用RIP，会使路由器为每个网段都要维护一个路由条			目（跳数，方向），根据条目信息无法进行高效率路径的选择。而OSPF的路由器会主动测试与其相连的链路状态，临站会将这些信息在自治系		    统中传播出去，其他路由器收到这些信息后，建立完整的路由表。
		路由器会定期向网络发送状态信息，列出自己直连的其他路由器以及链路状态。路由器利用从其他路由器收到的状态信息建立网络拓扑的映射，在要转发数据报时，会根据现有条件选择最佳路径。
	
交换机：HUB升级版，能够将对应端口接受的数据发送到指定的端口。大多数交换机把端口都与所连接设配器MAC（网卡MAC）相关联。传统交换机只处理物理地址。二层设备

ICMP重定向:后续的路由A告诉主机下一次应该不从这个A路由走，要从另外一个B路由走。然后这个A路由会向主机发送一个“ICMP重定向”报文让主机更新路由表
路由的产生：
        1.可以在配置文件中进行配置
        2.开机引导期间（一般发送三份报文，任意一份应答就不再发送。）通过广播或多播形式发送 “路由器请求报文”，一台或多台路由器进行响应回复。
路由器通告报文:
        定期通过广播或多播形式传送该报文，让每个监听它的主机相应的更新它们的路由表。
路由中相关标记符号：
        Flags:
                U:该路由可用
                G:该路由是网关 该标记用来区别 是间接路由还是直接路由
                H:该路由是一到一个主机
                D:该路由是由重定向报文创建的
                M:该路由已被重定向报文修改
        Refcnt:
                面向连接的协议在保持会话连接时要固定路由，这个数表明正在使用该路由链路的进程数。
        Use:
                通过该路由发送的分组数

路由器上有“路由守护进程”，这些守护进程运行“选路协议”负责与相邻路由进行通信，根据收到的信息进行相应的路由更新操作。这个过程叫做“动态选路”，
路由的改变是由 route daemon操作的而不是由 如route命令进行的。
