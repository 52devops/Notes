DNS是基于TCP/IP的分布式数据库，每个节点保存自己相关网址内容的数据信息。<br>
DNS命名结构结构类似于树。顶端为根(.)，然而域名的结合是从下端至根。每一节点通过"."分隔。从下到上依次对应 域名的从左到右。<br>
DNS命名结构中有一个特殊的顶级域“arpa”、该域是做地址到名字转换使用的。其结构为<br>
```flow
st=start: arpa
e=>end: 2
lay1=>operation: in-addr
lay2=>operation: 2
lay3=>operation: 1
lay4=>operation: 3
lay5=>operation: 2
st->lay1->lay2
lay2->lay3->lay4
lay4->lay5->e
```
IP:2.3.1.2
一个独立管理的DNS子树成为区域"zone",最常见的区域是二级域"xx.edu|cn..."，可以根据不同功能将二级域分为更小的域。
- DNS查询/响应报文格式:
  - 逻辑分层：
    - 第一层：
      - 标识(16 bit)
        标志(16 bit)
    - 第二层：
      - 问题数(16 bit)
        资源记录数(16 bit)
    - 第三层：
      - 授权资源记录数(16 bit)
	额外资源记录数(16 bit)
    - 第四层        从这层开始，下面子段长度都可变。
      -  查询问题
    - 第五层
      - 回答
    - 第六层
      - 授权
    - 第七层
      - 额外信息
## 标志字段被划分为：
字段|QR | opcode | AA | TC | RD | RA | zero | rcode|
----|----|----|----|----|----|----|----|----|
字节|1|4|1|1|1|1|3|4|
## 字段内容解释为：
字段| 字段内容|
----|----|
QR|0 查询报文1 响应报文|
opcode|0 标准查询<br>1 反向查询<br>2 服务器状态请求|
AA|授权回答，该名字服务器是被该域授权的|
TC|可截断的，UDP包过大，要切片|
RD|期望递归，告诉名字服务器必须处理这个查询（递归查询）。置0 迭代查询 返回能够解析该地址的名字服务器|
RA|可用递归，如果名字服务器支持递归查询，则在响应中将该比特置1|
rcode|返回码字段。默认值为0(无错)<br>3(名字差错)|
## 查询报文：
**查询报文在问题部分，其问题格式如下***
- 查询名(16 bit)
  - 要查找到名字、hostname其格式会这样排列
    - (5bit)tieba(5bit)baidu(3bit)com ***将每个区域长度的字符位数放在该区域的开始***
- 查询类型(8 bit)<br>查询类(8)
  - 查询类型：每个问题有自己查询类型
    + A    IP地址
    + NS  名字服务器
    + CHAME 规范名称
    + PTR 指针记录 根据IP查域名
    + HINFO 主机信息
    + MX  邮件交换记录
    + AXFR 对区域转换的请求
    + *或ANY 对所有记录转换请求
## 响应报文：
**DNS报文后三段采用资源记录RR的格式。
- 域名(32bit)
- 类型(16 bit)<br>类(16 bit)
- 生存时间(32 bit)  指Client端保留该资源的秒数
- 资源长度(16 bit) 资源数据(16 bit)
- 资源数据(32 bit与上一层的资源数据连接)
- /etc/resolv.conf
  - nameserver 指定DNS地址
  - domain 默认的域名地址。如果输入的地址不全 默认使用该设置补全域名。 
